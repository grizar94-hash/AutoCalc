<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∞–≤—Ç–æ –∏–∑ –ö–æ—Ä–µ–∏</title>
<meta property="og:image" content="https://grizar94-hash.github.io/AutoCalc/share.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<!-- –ò–∫–æ–Ω–∫–∞ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
<link rel="icon" href="icon.png" type="image/png">
<link rel="apple-touch-icon" href="icon.png">

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç -->
<link rel="manifest" href="manifest.json">

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Roboto', sans-serif; background: #f0f2f5; padding: 20px; }
h2 { text-align: center; color: #0b69ff; margin-bottom: 20px; }
.section { padding: 20px; margin-bottom: 15px; border-radius: 12px; color: #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: background 0.3s; }
.korea { background: #4fc3f7; }
.currency { background: #26a69a; }
.russia { background: #81c784; }
label { display: block; margin-top: 10px; font-weight: bold; }
input { width: 100%; padding: 10px; margin-top: 5px; border-radius: 8px; border: none; font-size:16px; box-sizing:border-box; }
.checkbox { display:flex; align-items:center; margin-top:10px; font-weight: normal; color: #111; }
.checkbox input { margin-right:10px; }
button { width: 100%; padding: 14px; margin-top: 20px; font-size: 18px; border:none; border-radius:10px; cursor:pointer; background:#0b69ff; color:white; font-weight:bold; transition: background 0.3s; }
button:hover { background:#0756d1; }
button.clear { background:#ccc; color:#111; margin-top:10px; }
.result { margin-top: 20px; padding: 20px; border-radius:12px; background:#fff3e0; font-size:18px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
.result p { margin: 10px 0; font-weight: bold; font-size: 18px; }
hr { border: 0; border-top: 2px dashed #ccc; margin: 10px 0; }
</style>
</head>
<body>

<h2>üöó –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Å—Ç–∞–≤–∫–∏ –∞–≤—Ç–æ –∏–∑ –ö–æ—Ä–µ–∏</h2>

<div class="section korea" id="blockKorea">
  <h3>üá∞üá∑ –ö–æ—Ä–µ—è</h3>
  <label>–¶–µ–Ω–∞ –∞–≤—Ç–æ (‚Ç©): <input type="number" id="priceKrw" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É –∞–≤—Ç–æ"></label>
  <label>–†–∞—Å—Ö–æ–¥—ã –≤ –ö–æ—Ä–µ–µ –≤–∫–ª—é—á–∞—è —Ñ—Ä–∞—Ö—Ç (‚Ç©): <input type="number" id="expensesKrw" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ä–∞—Å—Ö–æ–¥—ã"></label>
</div>

<div class="section currency" id="blockCurrency">
  <h3>üí± –ö—É—Ä—Å –≤–∞–ª—é—Ç</h3>
  <label>USDT ‚Üí ‚ÇΩ: <input type="number" id="rubUsdt" placeholder="–°–∫–æ–ª—å–∫–æ —Ä—É–±–ª–µ–π –∑–∞ 1 USDT" step="0.1"></label>
  <label>USDT ‚Üí ‚Ç©: <input type="number" id="usdtKrw" placeholder="–°–∫–æ–ª—å–∫–æ –≤–æ–Ω –∑–∞ 1 USDT" step="0.1"></label>
</div>

<div class="section russia" id="blockRussia">
  <h3>üá∑üá∫ –†–æ—Å—Å–∏—è</h3>
  <label>–ü–æ—à–ª–∏–Ω–∞ –∏ —Å–±–æ—Ä—ã (‚ÇΩ): <input type="number" id="dutyRub" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä 150000"></label>
  <label>–¢–∞–º–æ–∂–µ–Ω–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∏ –±—Ä–æ–∫–µ—Ä (‚ÇΩ): <input type="number" id="brokerRub" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä 70000"></label>
  <label>–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –†–æ—Å—Å–∏–∏ (‚ÇΩ): <input type="number" id="deliveryRub" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä 50000"></label>
</div>

<div class="checkbox">
  <input type="checkbox" id="insuranceCheck">
  <label for="insuranceCheck">
    –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞—Ö–æ–≤–∫—É 0,3% –æ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—É–º–º—ã
  </label>
</div>

<button onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
<button class="clear" onclick="clearAll()">–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª—è</button>

<div class="result" id="result"></div>

<script>
// –ê–Ω–∏–º–∞—Ü–∏—è —á–∏—Å–µ–ª —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ —Ç—ã—Å—è—á
function animateValue(id, start, end, duration) {
    let obj = document.getElementById(id);
    let range = end - start;
    let startTime = null;
    function step(timestamp) {
        if (!startTime) startTime = timestamp;
        let progress = timestamp - startTime;
        let value = Math.min(Math.floor(start + (range * (progress / duration))), end);
        obj.innerHTML = value.toLocaleString('ru-RU') + ' ‚ÇΩ';
        if (progress < duration) window.requestAnimationFrame(step);
        else obj.innerHTML = end.toLocaleString('ru-RU') + ' ‚ÇΩ';
    }
    window.requestAnimationFrame(step);
}

function calculate(){
  let priceKrw = parseFloat(document.getElementById('priceKrw').value) || 0;
  let expensesKrw = parseFloat(document.getElementById('expensesKrw').value) || 0;
  let rubUsdt = parseFloat(document.getElementById('rubUsdt').value) || 0;
  let usdtKrw = parseFloat(document.getElementById('usdtKrw').value) || 0;
  let dutyRub = parseFloat(document.getElementById('dutyRub').value) || 0;
  let brokerRub = parseFloat(document.getElementById('brokerRub').value) || 0;
  let deliveryRub = parseFloat(document.getElementById('deliveryRub').value) || 0;
  let insuranceCheck = document.getElementById('insuranceCheck').checked;

  let totalKrw = priceKrw + expensesKrw;
  let rubNeededViaUsdt = (totalKrw / usdtKrw) * rubUsdt;
  let preFinalRub = rubNeededViaUsdt + dutyRub + brokerRub + deliveryRub;
  let insuranceRub = insuranceCheck ? preFinalRub * 0.003 : 0;
  let finalRub = preFinalRub + insuranceRub;

  // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –±–ª–æ–∫–æ–≤
  document.getElementById('blockKorea').style.background = '#29b6f6';
  document.getElementById('blockRussia').style.background = '#66bb6a';
  document.getElementById('result').style.background = '#ffe0b2';

  document.getElementById('result').innerHTML = `
    <p>üí∞ –í –ö–æ—Ä–µ–µ: <span id="valKorea">0 ‚ÇΩ</span></p>
    <p>üöõ –í –†–æ—Å—Å–∏–∏: <span id="valRussia">0 ‚ÇΩ</span></p>
    ${insuranceCheck ? `<p>üõ°Ô∏è –°—Ç—Ä–∞—Ö–æ–≤–∫–∞: <span id="valInsurance">0 ‚ÇΩ</span></p>` : ''}
    <hr>
    <p>üèÅ –ü–æ–¥ –∫–ª—é—á: <span id="valFinal">0 ‚ÇΩ</span></p>
  `;

  animateValue('valKorea', 0, Math.round(rubNeededViaUsdt), 1000);
  animateValue('valRussia', 0, Math.round(dutyRub + brokerRub + deliveryRub), 1000);
  if(insuranceCheck) animateValue('valInsurance', 0, Math.round(insuranceRub), 1000);
  animateValue('valFinal', 0, Math.round(finalRub), 1200);
}

function clearAll(){
  document.getElementById('priceKrw').value='';
  document.getElementById('expensesKrw').value='';
  document.getElementById('rubUsdt').value='';
  document.getElementById('usdtKrw').value='';
  document.getElementById('dutyRub').value='';
  document.getElementById('brokerRub').value='';
  document.getElementById('deliveryRub').value='';
  document.getElementById('insuranceCheck').checked=false;
  document.getElementById('result').innerHTML='';
  document.getElementById('blockKorea').style.background = '#4fc3f7';
  document.getElementById('blockRussia').style.background = '#81c784';
}
</script>

</body>
</html>
